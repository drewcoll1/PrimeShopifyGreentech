{% doc %}
  @prompt
    make a hero section that the entire area is a video and then words can be put on top of it, can you make it so the youtube video is playing, ok great can you make the video be the entire height of the page i do not want any black space above or below it

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-video-hero-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-video-hero__background-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .ai-video-hero__video-{{ ai_gen_id }} {
    position: absolute;
    top: 50%;
    left: 50%;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    transform: translate(-50%, -50%);
    object-fit: cover;}

  .ai-video-hero__youtube-{{ ai_gen_id }} {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100vw;
    height: 56.25vw;
    min-height: 100vh;
    min-width: 177.78vh;
    transform: translate(-50%, -50%);
    border: none;
  }

  .ai-video-hero__placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-video-hero__placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 300px;
    max-height: 300px;
    opacity: 0.5;
  }

  .ai-video-hero__overlay-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, {{ block.settings.overlay_opacity | divided_by: 100.0 }});
    z-index: 2;
  }

  .ai-video-hero__content-{{ ai_gen_id }} {
    position: relative;
    z-index: 3;
    text-align: {{ block.settings.text_alignment }};
    color: {{ block.settings.text_color }};
    max-width: {{ block.settings.content_width }}px;
    padding: 0 20px;
  }

  .ai-video-hero__heading-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size }}px;
    font-weight: {{ block.settings.heading_weight }};
    margin: 0 0 {{ block.settings.heading_margin }}px 0;
    line-height: 1.2;
  }

  .ai-video-hero__subheading-{{ ai_gen_id }} {
    font-size: {{ block.settings.subheading_size }}px;
    margin: 0 0 {{ block.settings.subheading_margin }}px 0;
    line-height: 1.4;
    opacity: 0.9;
  }

  .ai-video-hero__button-{{ ai_gen_id }} {
    display: inline-block;
    padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
    background-color: {{ block.settings.button_background }};
    color: {{ block.settings.button_text_color }};
    text-decoration: none;
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: {{ block.settings.button_font_size }}px;
    font-weight: {{ block.settings.button_font_weight }};
    transition: all 0.3s ease;
    border: {{ block.settings.button_border_width }}px solid {{ block.settings.button_border_color }};
  }

  .ai-video-hero__button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_background }};
    color: {{ block.settings.button_hover_text_color }};border-color: {{ block.settings.button_hover_border_color }};
    transform: translateY(-2px);
  }

  @media screen and (max-width: 768px) {
    .ai-video-hero__heading-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size | times: 0.7 }}px;
    }

    .ai-video-hero__subheading-{{ ai_gen_id }} {
      font-size: {{ block.settings.subheading_size | times: 0.8 }}px;
    }

    .ai-video-hero__content-{{ ai_gen_id }} {
      max-width: 100%;
      padding: 0 15px;
    }
  }
{% endstyle %}

<youtube-hero-{{ ai_gen_id }}
  class="ai-video-hero-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-video-hero__background-{{ ai_gen_id }}">
    {% if block.settings.youtube_video_id != blank %}
      <iframe
        class="ai-video-hero__youtube-{{ ai_gen_id }}"
        src="https://www.youtube.com/embed/{{ block.settings.youtube_video_id }}?autoplay=1&mute=1&loop=1&playlist={{ block.settings.youtube_video_id }}&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&disablekb=1&fs=0&cc_load_policy=0&playsinline=1&enablejsapi=1"
        title="Background video"
        allow="autoplay; encrypted-media"
        allowfullscreen
        loading="lazy"
      ></iframe>
    {% elsif block.settings.background_video %}
      <video
        class="ai-video-hero__video-{{ ai_gen_id }}"
        autoplay
        muted
        loop
        playsinline
        {% if block.settings.video_poster %}poster="{{ block.settings.video_poster | image_url: width: 1920 }}"{% endif %}>
        <source src="{{ block.settings.background_video }}" type="video/mp4">
      </video>
    {% else %}
      <div class="ai-video-hero__placeholder-{{ ai_gen_id }}">
        {{ 'hero-apparel-1' | placeholder_svg_tag }}
      </div>
    {% endif %}
  </div>

  {% if block.settings.show_overlay %}
    <div class="ai-video-hero__overlay-{{ ai_gen_id }}"></div>
  {% endif %}

  <div class="ai-video-hero__content-{{ ai_gen_id }}">
    {% if block.settings.heading != blank %}
      <h1 class="ai-video-hero__heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h1>
    {% endif %}

    {% if block.settings.subheading != blank %}
      <p class="ai-video-hero__subheading-{{ ai_gen_id }}">{{ block.settings.subheading }}</p>
    {% endif %}

    {% if block.settings.button_text != blank and block.settings.button_link != blank %}
      <a href="{{ block.settings.button_link }}" class="ai-video-hero__button-{{ ai_gen_id }}">
        {{ block.settings.button_text }}
      </a>
    {% endif %}
  </div>
</youtube-hero-{{ ai_gen_id }}>

<script>
  (function() {
    class YoutubeHero{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.setupYouTubeAPI();
      }

      setupYouTubeAPI() {
        const iframe = this.querySelector('.ai-video-hero__youtube-{{ ai_gen_id }}');
        if (!iframe) return;

        iframe.addEventListener('load', () => {
          const player = iframe.contentWindow;
          if (player && player.postMessage) {
            player.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
          }
        });

        window.addEventListener('message', (event) => {
          if (event.origin !== 'https://www.youtube.com') return;
          try {
            const data = JSON.parse(event.data);
            if (data.event === 'video-ready') {
              const player = iframe.contentWindow;
              player.postMessage('{"event":"command","func":"mute","args":""}', '*');
              player.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
            }
          } catch (e) {
            console.log('YouTube API message parsing failed');
          }
        });
      }
    }

    customElements.define('youtube-hero-{{ ai_gen_id }}', YoutubeHero{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Full Screen Video Hero",
  "settings": [
    {
      "type": "header",
      "content": "Video Settings"
    },
    {
      "type": "text",
      "id": "youtube_video_id",
      "label": "YouTube video ID",
      "info": "Enter the YouTube video ID (e.g., dQw4w9WgXcQ from https://www.youtube.com/watch?v=dQw4w9WgXcQ)"
    },
    {
      "type": "url",
      "id": "background_video",
      "label": "Fallback video URL",
      "info": "MP4 video file as fallback if YouTube is not available"
    },
    {
      "type": "image_picker",
      "id": "video_poster",
      "label": "Video poster image",
      "info": "Fallback image shown before video loads"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "content_width",
      "min": 300,
      "max": 1000,
      "step": 50,
      "unit": "px",
      "label": "Content max width",
      "default": 600
    },
    {
      "type": "header",
      "content": "Overlay"
    },
    {
      "type": "checkbox",
      "id": "show_overlay",
      "label": "Show overlay",
      "default": true
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 30
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Welcome to Our Store"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Discover our amazing collection of products"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Text Styling"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 24,
      "max": 80,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 48
    },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "Heading weight",
      "options": [
        {
          "value": "300",
          "label": "Light"
        },
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "700"
    },
    {
      "type": "range",
      "id": "heading_margin",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Heading bottom margin",
      "default": 16
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 14,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Subheading size",
      "default": 18
    },
    {
      "type": "range",
      "id": "subheading_margin",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Subheading bottom margin",
      "default": 24
    },
    {
      "type": "header",
      "content": "Button Styling"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Button hover background",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button hover text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Button vertical padding",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Button horizontal padding",
      "default": 28
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button font size",
      "default": 16
    },
    {
      "type": "select",
      "id": "button_font_weight",
      "label": "Button font weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "range",
      "id": "button_border_width",
      "min": 0,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Button border width",
      "default": 0
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button border color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_hover_border_color",
      "label": "Button hover border color",
      "default": "#333333"
    }
  ],
  "presets": [
    {
      "name": "Full Screen Video Hero"
    }
  ]
}
{% endschema %}