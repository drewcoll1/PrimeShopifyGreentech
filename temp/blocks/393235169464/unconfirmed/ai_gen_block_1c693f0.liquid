{% doc %}
  @prompt
    ok I want a display section for my collections, I want there to be cards for each collection all of them should be on the page, ok good i like this let me pick the images, also lets make it so there is a description below collection name, ok good please have the images contain not fill, there should be white space around the image for the areas it does not cover, ok cool add the option for another card to be added if needed

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-collections-display-{{ ai_gen_id }} {
    padding: {{ block.settings.section_padding }}px 0;
  }

  .ai-collections-grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax({{ block.settings.card_min_width }}px, 1fr));
    gap: {{ block.settings.grid_gap }}px;
    max-width: 100%;
  }

  .ai-collection-card-{{ ai_gen_id }} {
    background-color: {{ block.settings.card_background_color }};
    border-radius: {{ block.settings.card_border_radius }}px;
    padding: {{ block.settings.card_padding }}px;
    text-align: center;
    transition: transform 0.3s ease;
    border: {{ block.settings.card_border_width }}px solid {{ block.settings.card_border_color }};
  }

  .ai-collection-card-{{ ai_gen_id }}:hover {
    transform: translateY(-{{ block.settings.hover_lift }}px);
  }

  .ai-collection-image-container-{{ ai_gen_id }} {
    width: 100%;
    height: {{ block.settings.image_height }}px;
    background-color: {{ block.settings.image_background_color }};
    border-radius: {{ block.settings.image_border_radius }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: {{ block.settings.content_spacing }}px;
    overflow: hidden;
  }

  .ai-collection-image-{{ ai_gen_id }} {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: {{ block.settings.image_border_radius }}px;
  }

  .ai-collection-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .ai-collection-image-placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-collection-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    color: #666;
    text-align: center;
    pointer-events: none;
  }

  .ai-collection-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_font_size }}px;
    color: {{ block.settings.title_color }};
    margin: 0 0 {{ block.settings.content_spacing }}px;
    font-weight: 600;
  }

  .ai-collection-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_font_size }}px;
    color: {{ block.settings.description_color }};
    margin: 0 0 {{ block.settings.content_spacing }}px;
    line-height: 1.4;
  }

  .ai-collection-link-{{ ai_gen_id }} {
    display: inline-block;
    padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
    background-color: {{ block.settings.button_background_color }};
    color: {{ block.settings.button_text_color }};
    text-decoration: none;
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: {{ block.settings.button_font_size }}px;
    transition: background-color 0.3s ease;
  }

  .ai-collection-link-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_background_color }};
    color: {{ block.settings.button_hover_text_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-collections-grid-{{ ai_gen_id }} {
      grid-template-columns: repeat({{ block.settings.columns_mobile }}, 1fr);
    }
  }
{% endstyle %}

<div class="ai-collections-display-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-collections-grid-{{ ai_gen_id }}">
    {% for i in (1..10) %}
      {% liquid
        assign collection_key = 'collection_' | append: i
        assign image_key = 'collection_' | append: i | append: '_image'
        assign description_key = 'collection_' | append: i | append: '_description'
        assign enabled_key = 'collection_' | append: i | append: '_enabled'
        
        assign collection = block.settings[collection_key]
        assign custom_image = block.settings[image_key]
        assign custom_description = block.settings[description_key]
        assign is_enabled = block.settings[enabled_key]
      %}

      {% if is_enabled %}
        <div class="ai-collection-card-{{ ai_gen_id }}">
          <div class="ai-collection-image-container-{{ ai_gen_id }}">
            {% if custom_image %}
              <img
                src="{{ custom_image | image_url: width: 500 }}"
                alt="{{ custom_image.alt | escape }}"
                class="ai-collection-image-{{ ai_gen_id }}"
                loading="lazy"
                width="500"
                height="{{ block.settings.image_height }}"
              >
            {% elsif collection and collection.featured_image %}
              <img
                src="{{ collection.featured_image | image_url: width: 500 }}"
                alt="{{ collection.featured_image.alt | escape }}"
                class="ai-collection-image-{{ ai_gen_id }}"
                loading="lazy"
                width="500"
                height="{{ block.settings.image_height }}"
              >
            {% else %}
              <div class="ai-collection-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
                <div class="ai-collection-empty-state-{{ ai_gen_id }}">
                  Add an image
                </div>
              </div>
            {% endif %}
          </div>

          {% if collection %}
            <h3 class="ai-collection-title-{{ ai_gen_id }}">{{ collection.title }}</h3>
            
            {% if custom_description != blank %}
              <div class="ai-collection-description-{{ ai_gen_id }}">{{ custom_description }}</div>
            {% elsif collection.description != blank %}
              <div class="ai-collection-description-{{ ai_gen_id }}">{{ collection.description | strip_html | truncate: 120 }}</div>
            {% endif %}

            <a href="{{ collection.url }}" class="ai-collection-link-{{ ai_gen_id }}">
              {{ block.settings.button_text }}
            </a>
          {% else %}
            <h3 class="ai-collection-title-{{ ai_gen_id }}">Collection {{ i }}</h3>
            <div class="ai-collection-description-{{ ai_gen_id }}">Select a collection to display</div>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Collections display",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "card_min_width",
      "min": 200,
      "max": 400,
      "step": 20,
      "unit": "px",
      "label": "Card minimum width",
      "default": 280
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Grid gap",
      "default": 30
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "Columns on mobile",
      "options": [
        {"value": "1", "label": "1"},
        {"value": "2", "label": "2"}
      ],
      "default": "1"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section padding",
      "default": 40
    },
    {
      "type": "header",
      "content": "Card style"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Card border radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "card_padding",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Card padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "card_border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Card border width",
      "default": 1
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Card border color",
      "default": "#e6e6e6"
    },
    {
      "type": "range",
      "id": "hover_lift",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Hover lift effect",
      "default": 3
    },
    {
      "type": "header",
      "content": "Image style"
    },
    {
      "type": "range",
      "id": "image_height",
      "min": 150,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Image height",
      "default": 250
    },
    {
      "type": "color",
      "id": "image_background_color",
      "label": "Image background",
      "default": "#f8f8f8"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Image border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 14,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Title font size",
      "default": 20
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "description_font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description font size",
      "default": 14
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#666666"
    },
    {
      "type": "range",
      "id": "content_spacing",
      "min": 5,
      "max": 25,
      "step": 1,
      "unit": "px",
      "label": "Content spacing",
      "default": 12
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "View collection"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_background_color",
      "label": "Button hover background",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button hover text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Button font size",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 25,
      "step": 1,
      "unit": "px",
      "label": "Button border radius",
      "default": 6
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 5,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button vertical padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 10,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Button horizontal padding",
      "default": 20
    },
    {
      "type": "header",
      "content": "Collection 1"
    },
    {
      "type": "checkbox",
      "id": "collection_1_enabled",
      "label": "Enable collection 1",
      "default": true
    },
    {
      "type": "collection",
      "id": "collection_1",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_1_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_1_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 2"
    },
    {
      "type": "checkbox",
      "id": "collection_2_enabled",
      "label": "Enable collection 2",
      "default": true
    },
    {
      "type": "collection",
      "id": "collection_2",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_2_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_2_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 3"
    },
    {
      "type": "checkbox",
      "id": "collection_3_enabled",
      "label": "Enable collection 3",
      "default": true
    },
    {
      "type": "collection",
      "id": "collection_3",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_3_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_3_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 4"
    },
    {
      "type": "checkbox",
      "id": "collection_4_enabled",
      "label": "Enable collection 4"
    },
    {
      "type": "collection",
      "id": "collection_4",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_4_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_4_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 5"
    },
    {
      "type": "checkbox",
      "id": "collection_5_enabled",
      "label": "Enable collection 5"
    },
    {
      "type": "collection",
      "id": "collection_5",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_5_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_5_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 6"
    },
    {
      "type": "checkbox",
      "id": "collection_6_enabled",
      "label": "Enable collection 6"
    },
    {
      "type": "collection",
      "id": "collection_6",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_6_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_6_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 7"
    },
    {
      "type": "checkbox",
      "id": "collection_7_enabled",
      "label": "Enable collection 7"
    },
    {
      "type": "collection",
      "id": "collection_7",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_7_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_7_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 8"
    },
    {
      "type": "checkbox",
      "id": "collection_8_enabled",
      "label": "Enable collection 8"
    },
    {
      "type": "collection",
      "id": "collection_8",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_8_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_8_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 9"
    },
    {
      "type": "checkbox",
      "id": "collection_9_enabled",
      "label": "Enable collection 9"
    },
    {
      "type": "collection",
      "id": "collection_9",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_9_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_9_description",
      "label": "Custom description"
    },
    {
      "type": "header",
      "content": "Collection 10"
    },
    {
      "type": "checkbox",
      "id": "collection_10_enabled",
      "label": "Enable collection 10"
    },
    {
      "type": "collection",
      "id": "collection_10",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_10_image",
      "label": "Custom image"
    },
    {
      "type": "textarea",
      "id": "collection_10_description",
      "label": "Custom description"
    }
  ],
  "presets": [
    {
      "name": "Collections display"
    }
  ]
}
{% endschema %}