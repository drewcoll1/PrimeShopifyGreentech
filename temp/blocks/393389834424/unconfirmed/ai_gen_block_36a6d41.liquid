{% doc %}
  @prompt
    ok I want a display section for my collections, I want there to be cards for each collection all of them should be on the page, everything needs to be centered on the page, ok good i like this let me pick the images, also lets make it so there is a description below collection name, ok good please have the images contain not fill, there should be white space around the image for the areas it does not cover, ok cool add the option for another card to be added if needed, i need it to go 3 in each line horizontally, ok I want a display section for my collections, I want there to be cards for each collection all of them should be on the page, ok good i like this let me pick the images, also lets make it so there is a description below collection name, ok good please have the images contain not fill, there should be white space around the image for the areas it does not cover, ok cool add the option for another card to be added if needed, ok great please make sure that all of this section is centered on the page, please give me the option to move the entire section left and right as much as i want, please make all the collection cards the same size

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-collections-display-{{ ai_gen_id }} {
    width: 100%;
    padding: 40px 20px;
    display: flex;
    justify-content: center;
    transform: translateX({{ block.settings.section_offset }}px);
  }

  .ai-collections-container-{{ ai_gen_id }} {
    max-width: 1200px;
    width: 100%;
  }

  .ai-collections-grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: {{ block.settings.card_spacing }}px;
    justify-items: center;
  }

  .ai-collection-card-{{ ai_gen_id }} {
    width: 100%;
    max-width: {{ block.settings.card_width }}px;
    background-color: {{ block.settings.card_background_color }};
    border-radius: {{ block.settings.card_border_radius }}px;
    padding: {{ block.settings.card_padding }}px;
    text-align: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: {{ block.settings.card_border_width }}px solid {{ block.settings.card_border_color }};
  }

  .ai-collection-card-{{ ai_gen_id }}:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  }

  .ai-collection-image-container-{{ ai_gen_id }} {
    width: 100%;
    height: {{ block.settings.image_height }}px;
    background-color: {{ block.settings.image_background_color }};
    border-radius: {{ block.settings.image_border_radius }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 16px;
    overflow: hidden;
  }

  .ai-collection-image-{{ ai_gen_id }} {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: {{ block.settings.image_border_radius }}px;
  }

  .ai-collection-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f4f4f4;
    border-radius: {{ block.settings.image_border_radius }}px;
    position: relative;
  }

  .ai-collection-placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-collection-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    color: #666;
    text-align: center;
  }

  .ai-collection-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_font_size }}px;
    color: {{ block.settings.title_color }};
    margin: 0 0 8px;
    font-weight: 600;
  }

  .ai-collection-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_font_size }}px;
    color: {{ block.settings.description_color }};
    line-height: 1.4;
    margin: 0;
  }

  .ai-collection-link-{{ ai_gen_id }} {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  @media screen and (max-width: 990px) {
    .ai-collections-grid-{{ ai_gen_id }} {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media screen and (max-width: 749px) {
    .ai-collections-grid-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
    }
    
    .ai-collections-display-{{ ai_gen_id }} {
      padding: 20px 15px;
    }
  }
{% endstyle %}

<div class="ai-collections-display-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-collections-container-{{ ai_gen_id }}">
    <div class="ai-collections-grid-{{ ai_gen_id }}">
      {% for i in (1..12) %}
        {% liquid
          assign collection_key = 'collection_' | append: i
          assign image_key = 'collection_' | append: i | append: '_image'
          assign title_key = 'collection_' | append: i | append: '_title'
          assign description_key = 'collection_' | append: i | append: '_description'
          assign url_key = 'collection_' | append: i | append: '_url'
          
          assign collection = block.settings[collection_key]
          assign custom_image = block.settings[image_key]
          assign custom_title = block.settings[title_key]
          assign custom_description = block.settings[description_key]
          assign custom_url = block.settings[url_key]
        %}

        {% if collection != blank or custom_image != blank or custom_title != blank %}
          <div class="ai-collection-card-{{ ai_gen_id }}">
            {% liquid
              assign final_url = custom_url
              if final_url == blank and collection != blank
                assign final_url = collection.url
              endif
              
              assign final_title = custom_title
              if final_title == blank and collection != blank
                assign final_title = collection.title
              endif
              
              assign final_description = custom_description
              if final_description == blank and collection != blank
                assign final_description = collection.description
              endif
              
              assign final_image = custom_image
              if final_image == blank and collection != blank
                assign final_image = collection.featured_image
              endif
            %}

            {% if final_url != blank %}
              <a href="{{ final_url }}" class="ai-collection-link-{{ ai_gen_id }}">
            {% endif %}

            <div class="ai-collection-image-container-{{ ai_gen_id }}">
              {% if final_image %}
                <img
                  src="{{ final_image | image_url: width: 400 }}"
                  alt="{{ final_image.alt | default: final_title | escape }}"
                  class="ai-collection-image-{{ ai_gen_id }}"
                  loading="lazy"
                  width="400"
                  height="{{ block.settings.image_height }}"
                >
              {% else %}
                <div class="ai-collection-placeholder-{{ ai_gen_id }}">
                  {{ 'collection-1' | placeholder_svg_tag }}
                  <div class="ai-collection-empty-state-{{ ai_gen_id }}">
                    Add an image
                  </div>
                </div>
              {% endif %}
            </div>

            {% if final_title != blank %}
              <h3 class="ai-collection-title-{{ ai_gen_id }}">{{ final_title }}</h3>
            {% endif %}

            {% if final_description != blank %}
              <p class="ai-collection-description-{{ ai_gen_id }}">{{ final_description | truncate: 120 }}</p>
            {% endif %}

            {% if final_url != blank %}
              </a>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Collections display",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "section_offset",
      "min": -200,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Section horizontal offset",
      "default": 0
    },
    {
      "type": "range",
      "id": "card_spacing",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Card spacing",
      "default": 30
    },
    {
      "type": "range",
      "id": "card_width",
      "min": 200,
      "max": 400,
      "step": 20,
      "unit": "px",
      "label": "Card width",
      "default": 300
    },
    {
      "type": "range",
      "id": "card_padding",
      "min": 10,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Card padding",
      "default": 20
    },
    {
      "type": "header",
      "content": "Card style"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Card border",
      "default": "#e6e6e6"
    },
    {
      "type": "range",
      "id": "card_border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Card border width",
      "default": 1
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Card border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Image style"
    },
    {
      "type": "range",
      "id": "image_height",
      "min": 150,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Image height",
      "default": 200
    },
    {
      "type": "color",
      "id": "image_background_color",
      "label": "Image background",
      "default": "#f9f9f9"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Image border radius",
      "default": 4
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 14,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Title font size",
      "default": 18
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "description_font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description font size",
      "default": 14
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Collection 1"
    },
    {
      "type": "collection",
      "id": "collection_1",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_1_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_1_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_1_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_1_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 2"
    },
    {
      "type": "collection",
      "id": "collection_2",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_2_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_2_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_2_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_2_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 3"
    },
    {
      "type": "collection",
      "id": "collection_3",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_3_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_3_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_3_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_3_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 4"
    },
    {
      "type": "collection",
      "id": "collection_4",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_4_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_4_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_4_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_4_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 5"
    },
    {
      "type": "collection",
      "id": "collection_5",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_5_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_5_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_5_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_5_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 6"
    },
    {
      "type": "collection",
      "id": "collection_6",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_6_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_6_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_6_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_6_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 7"
    },
    {
      "type": "collection",
      "id": "collection_7",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_7_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_7_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_7_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_7_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 8"
    },
    {
      "type": "collection",
      "id": "collection_8",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_8_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_8_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_8_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_8_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 9"
    },
    {
      "type": "collection",
      "id": "collection_9",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_9_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_9_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_9_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_9_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 10"
    },
    {
      "type": "collection",
      "id": "collection_10",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_10_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_10_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_10_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_10_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 11"
    },
    {
      "type": "collection",
      "id": "collection_11",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_11_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_11_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_11_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_11_url",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Collection 12"
    },
    {
      "type": "collection",
      "id": "collection_12",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "collection_12_image",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "collection_12_title",
      "label": "Custom title"
    },
    {
      "type": "textarea",
      "id": "collection_12_description",
      "label": "Custom description"
    },
    {
      "type": "url",
      "id": "collection_12_url",
      "label": "Custom URL"
    }
  ],
  "presets": [
    {
      "name": "Collections display"
    }
  ]
}
{% endschema %}